{
  "backend": {
    "_target_": "cotlab.backends.TransformersBackend",
    "device": "cuda",
    "dtype": "bfloat16",
    "enable_hooks": true,
    "trust_remote_code": true,
    "load_in_4bit": true,
    "bnb_4bit_quant_type": "nf4",
    "bnb_4bit_compute_dtype": "bfloat16",
    "bnb_4bit_use_double_quant": true
  },
  "model": {
    "name": "google/medgemma-4b-it",
    "variant": "4b",
    "max_new_tokens": 512,
    "temperature": 0.7,
    "top_p": 0.9,
    "safe_name": "medgemma_4b"
  },
  "prompt": {
    "_target_": "cotlab.prompts.RadiologyPromptStrategy",
    "name": "radiology",
    "contrarian": false,
    "few_shot": true,
    "answer_first": false,
    "output_format": "plain"
  },
  "dataset": {
    "_target_": "cotlab.datasets.RadiologyDataset",
    "name": "radiology",
    "path": "data/radiology.json"
  },
  "experiment": {
    "_target_": "cotlab.experiments.ActivationCompareExperiment",
    "name": "activation_compare",
    "description": "Compare residual stream activations across runs",
    "num_samples": 10,
    "seed": 42,
    "pooling": "last_token",
    "layers": null,
    "comparison_mode": "pairwise",
    "store_per_layer": true,
    "log_samples": false,
    "variants": [
      {
        "name": "radiology",
        "dataset": "base",
        "prompt": "base"
      },
      {
        "name": "medqa",
        "dataset": {
          "_target_": "cotlab.datasets.loaders.MedQADataset",
          "name": "medqa",
          "filename": "medqa/test.jsonl",
          "split": "test"
        },
        "prompt": {
          "_target_": "cotlab.prompts.mcq.MCQPromptStrategy",
          "name": "mcq",
          "few_shot": true,
          "output_format": "plain",
          "answer_first": false,
          "contrarian": false
        }
      }
    ]
  },
  "seed": 42,
  "verbose": true,
  "dry_run": false
}